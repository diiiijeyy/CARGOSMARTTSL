<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TSL Freight Movers INC.</title>

  <!--- Favicons --->
  <link href="assets/img/f-icon.png" rel="icon">
  <link href="assets/img/l-icon.png" rel="apple-touch-icon">

  <!--- Google Fonts --->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Amatic+SC:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!--- Vendor CSS Files --->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!--- Main CSS --->
  <link rel="stylesheet" href="./admin/styles/login.css">

  <!--- Icons --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">

  <!--- Google Identity Services (SDK) --->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>
  <!--- ================= Login ================= --->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <div class="card shadow p-4" id="login-container">
          <div class="text-center mb-4 d-flex align-items-center justify-content-center">
            <img src="assets/logo.png" alt="TSL Logo" class="img-fluid me-2" style="max-width: 80px;">
            <h3 class="m-0">TSL FREIGHT MOVERS INC.</h3>
          </div>

          <form id="loginForm" novalidate>
            <div id="alertMessage" class="custom-alert d-none" role="alert">
              <i class="bi bi-exclamation-circle-fill"></i>
              <span>Please check Email and Password.</span>
            </div>

            <!--- Email --->
            <div class="mb-3 text-start">
              <label for="username" class="form-label fw-semibold">Email address</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-user"></i></span>
                <input type="text" class="form-control" id="username" name="username" placeholder="Enter your email" required />
              </div>
            </div>

            <!-- Password -->
            <div class="mb-3 text-start">
              <label for="password" class="form-label fw-semibold">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-lock"></i></span>
                <input type="password" class="form-control" id="password" name="password" placeholder="Enter your password" required />
              </div>
            </div>

            <!-- Login Attempts -->
            <p id="loginAttempts">Login Attempts: <span id="attemptCount">0</span></p>

            <p class="mt-2 text-end">
              <a href="#" id="forgotPasswordBtn" class="forgot-password">Forgot Password?</a>
            </p>

            <button type="submit" class="btn btn-primary w-100 mb-2">Login</button>

            <div class="hr-with-text">
              <span>Or</span>
            </div>

            <div id="googleSignInButton" class="d-flex justify-content-center mt-3 mb-2"></div>

            <p class="text-center mt-3">
              Don't have an account?
              <a href="#" id="showSignup" class="text-primary fw-bold">Sign up</a>
            </p>
          </form>
        </div>
      </div>
    </div>
  </div>

<!-- ================= Sign up ================= -->
<div class="card shadow p-4 d-none" id="signup-container">
  <div class="text-center mb-4 d-flex align-items-center justify-content-center flex-wrap">
    <img src="assets/logo.png" alt="TSL Logo" class="img-fluid me-2" style="max-width: 80px;">
    <h3 class="m-0 text-nowrap">TSL FREIGHT MOVERS INC.</h3>
  </div>

  <form id="signupForm" novalidate>
    <div class="row g-3 text-start">

      <!-- Company Name -->
      <div class="col-md-6">
        <label for="signupCompanyName" class="form-label fw-semibold">Company Name</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-building"></i></span>
          <input type="text" id="signupCompanyName" class="form-control" placeholder="Enter company name" required>
        </div>
      </div>

      <!-- Contact Person -->
      <div class="col-md-6">
        <label for="signupContactPerson" class="form-label fw-semibold">Contact Person</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input type="text" id="signupContactPerson" class="form-control" placeholder="Enter contact person" required>
        </div>
      </div>

        <!-- Contact Number -->
        <div class="col-md-6">
          <label for="signupContactNumber" class="form-label fw-semibold">Contact Number</label>
          <div class="input-group" style="flex-wrap: nowrap;">
            <input
              type="tel"
              id="signupContactNumber"
              class="form-control"
              placeholder="e.g., 09123456789"
              required
              style="min-width: 0;"
            >
          </div>
          <small id="phoneError" class="text-danger d-block mt-1 fw-semibold" style="font-size: 0.875em;"></small>
        </div>

      <!-- Email -->
      <div class="col-md-6">
        <label for="signupEmail" class="form-label fw-semibold">Email Address</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-envelope"></i></span>
          <input type="email" id="signupEmail" class="form-control" placeholder="example@gmail.com" required>
        </div>
      </div>

      <!-- Address -->
      <div class="col-12">
        <label for="signupAddress" class="form-label fw-semibold">Address</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-home"></i></span>
          <input type="text" id="signupAddress" class="form-control" placeholder="Enter full address" required>
        </div>
      </div>

      <!-- Password -->
      <div class="col-md-6">
        <label for="signupPassword" class="form-label fw-semibold">Password</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input type="password" id="signupPassword" class="form-control" placeholder="Enter password" required>
        </div>
        <small id="passwordError" class="text-danger d-block ms-1 mt-1" style="font-size: 0.875em;"></small>
      </div>

      <!-- Confirm Password -->
      <div class="col-md-6">
        <label for="signupConfirmPassword" class="form-label fw-semibold">Confirm Password</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input type="password" id="signupConfirmPassword" class="form-control" placeholder="Re-enter password" required>
        </div>
        <small id="confirmPasswordError" class="text-danger d-block ms-1 mt-1" style="font-size: 0.875em;"></small>
      </div>

      <!-- Terms and Conditions -->
      <div class="col-12 d-flex align-items-center flex-wrap">
        <div class="form-check me-2">
          <input class="form-check-input" type="checkbox" id="termsCheckbox" required>
        </div>
        <label class="form-check-label" for="termsCheckbox">
          Yes, I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a>
        </label>
      </div>
    </div>

    <button type="submit" class="btn btn-primary w-100 mt-3">Create Account</button>

    <div class="text-center mt-3">
      <p class="mb-0">Already have an account? <a href="login.html" id="goToLogin" class="text-primary fw-semibold">Login</a></p>
    </div>
  </form>
</div>

  <!--- ================= Terms & Conditions ================= --->
  <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body" style="max-height: 60vh; overflow-y: auto;">
          <p><strong>1. Account Responsibility:</strong> You are responsible for your login credentials and activity under your account.</p>
          <p><strong>2. Accurate Information:</strong> You must provide correct information and update it when needed.</p>
          <p><strong>3. System Use:</strong> The system is for shipment tracking and analytics only.</p>
          <p><strong>4. Data Privacy:</strong> Your data is secure and used only for system purposes unless legally required.</p>
          <p><strong>5. Availability:</strong> We strive for 24/7 access but do not guarantee uninterrupted service.</p>
          <p><strong>6. Prohibited Use:</strong> You must not use the system for any unlawful or abusive activities.</p>
          <p><strong>7. Changes:</strong> We may update the terms and features. Continued use means you accept the changes.</p>
          <p><strong>8. Termination:</strong> We reserve the right to suspend accounts for violations or abuse.</p>
          <p><strong>9. Support:</strong> Contact our team through your dashboard for help or inquiries.</p>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!--- ================= Reset Password ================= --->
  <div class="card shadow p-4 d-none" id="reset-password-container">
    <div class="text-center mb-4 d-flex align-items-center justify-content-center">
      <img src="./assets/logo.png" alt="TSL Logo" class="img-fluid me-2" style="max-width: 80px;">
    </div>

    <form id="resetRequestForm" action="javascript:void(0)" novalidate>
      <h5 class="fw-semibold text-center mb-2">Reset your password</h5>
      <p class="text-muted text-center mb-4">
        Enter your email address and we’ll send you a verification code to reset your password.
      </p>

      <div class="mb-3 input-group">
        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
        <input class="form-control" type="email" id="resetRequestEmail" placeholder="Enter Your email" required>
      </div>

      <button type="submit" id="sendResetCodeBtn" class="btn btn-primary w-100 mb-2">
        Send Reset Password Code
      </button>

      <p class="mt-3 text-center">
        <a href="#" id="backToLoginLink" class="text-secondary small">
          <i class="bi bi-arrow-left"></i> Back to login
        </a>
      </p>
    </form>
  </div>

  <!--- ================= Reset Password Code Modal ================= --->
  <div class="modal fade" id="resetCodeModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content p-4 text-center">
        <h5 class="modal-title mb-3 fw-semibold">Reset Password Code</h5>
        <p class="text-muted small mb-4">Enter the 6-digit code we sent to your email.</p>

        <form id="resetCodeForm" action="javascript:void(0)">
          <input type="hidden" id="resetCodeEmail">

          <div class="otp-container">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-1">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-2">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-3">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-4">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-5">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="reset-otp-6">
          </div>

          <button type="submit" class="btn btn-success w-100 mb-2 mt-3">Verify Code</button>

          <p class="text-muted small mb-0">
            Didn’t receive a code?
            <span id="resetResendCodeBtn" class="resend-link">Resend Code</span>
          </p>
        </form>
      </div>
    </div>
  </div>

  <!--- ================= Verify Email Code Modal ================= --->
  <div class="modal fade" id="verifyModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content p-4 text-center">
        <h5 class="modal-title mb-3 fw-semibold">Email Verification</h5>
        <p class="text-muted small mb-4">Enter the 6-digit code sent to your email.</p>

        <form id="verifyForm">
          <input type="hidden" id="verifyEmail">

          <div class="otp-container">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-1">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-2">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-3">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-4">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-5">
            <input type="text" maxlength="1" class="otp-input form-control text-center" id="otp-6">
          </div>

          <button type="submit" class="btn btn-success w-100 mb-2">Verify Code</button>

          <p class="text-muted small">
            Didn’t receive a code?
            <a href="#" id="resendCodeBtn" class="resend-link">Resend Code</a>
          </p>
        </form>
      </div>
    </div>
  </div>

  <!--- ================= Email Already Registered Toast ================= --->
  <div class="position-fixed top-0 end-0 p-3" style="z-index: 1100">
    <div id="emailExistsToast" class="toast align-items-center text-bg-danger border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body">
          This email is already registered. Please verify or use another.
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
  </div>

  <!--- ================= Resend Code Toast ================= --->
  <div class="position-fixed top-0 end-0 p-3" style="z-index: 1100;">
    <div id="resendCodeToast" class="toast text-bg-success border-0 shadow-sm" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex align-items-center">
        <div class="toast-body">
          A new verification code has been sent to your email.
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

<!-- ================= Account Locked Modal ================= -->
<div class="modal fade" id="lockoutModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content lockout-modal border-0 shadow-lg">
      <div class="modal-header lockout-modal-header text-white">
        <h5 class="modal-title fw-bold">Account Locked</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body text-center lockout-modal-body">
        <div class="lockout-modal-icon">
          <i class="fas fa-lock"></i>
        </div>
        <p id="lockoutMessage" class="mb-0">
          Too many failed attempts. Please wait <span id="countdown">57</span> seconds or reset your password.
        </p>
      </div>

      <div class="modal-footer lockout-modal-footer border-0">
        <button id="waitBtn" class="btn btn-wait fw-semibold py-2 px-4">
          <i class="fas fa-hourglass-half me-2"></i>Wait
        </button>
        <button id="resetBtn" class="btn btn-reset fw-semibold py-2 px-4">
          <i class="fas fa-key me-2"></i>Reset Password
        </button>
      </div>
    </div>
  </div>
</div>


  <!--- ================= New Password Modal ================= --->
  <div class="modal fade" id="newPasswordModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="fw-bold text-center mb-2">Create new password</h5>
        <p class="text-muted text-center mb-4">Please enter your new password below</p>

        <form id="newPasswordForm" action="javascript:void(0)">
          <div class="mb-3">
            <label class="fw-semibold">New Password</label>
            <div class="input-group">
              <input type="password" class="form-control" id="newPassword" placeholder="Enter new password" required>
            </div>
          </div>

          <div class="mb-3">
            <label class="fw-semibold">Confirm New Password</label>
            <div class="input-group">
              <input type="password" class="form-control" id="confirmNewPassword" placeholder="Confirm new password" required>
            </div>
          </div>

          <button type="submit" class="btn btn-dark w-100">Update Password</button>
        </form>

        <p class="mt-3 text-center">
          <a href="#" id="backToLoginLink" class="text-secondary small">
            <i class="bi bi-arrow-left"></i> Back to login
          </a>
        </p>
      </div>
    </div>
  </div>

  <!--- ================= Preloader ================= --->
  <div id="preloader"></div>

  <a href="index.html" class="back-home d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-left-short"></i>
  </a>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script defer src="./admin/script/login.js"></script>

  <!--- International Telephone Input Library --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

  <!--- Utils script (needed for validation and formatting) --->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"></script>

  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const input = document.querySelector("#signupContactNumber");
    const errorMsg = document.getElementById("phoneError");

    const iti = window.intlTelInput(input, {
      initialCountry: "ph",   
     nationalMode: false,
     formatOnDisplay: true,
     autoPlaceholder: "polite",
      utilsScript:
       "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
   });

   iti.setCountry("ph");

   const signupForm = document.getElementById("signupForm");
    signupForm.addEventListener("submit", function () {
     errorMsg.textContent = "";

     let val = input.value.trim();
     if (val.startsWith("0")) val = "+63" + val.slice(1);

      const fullNumber = iti.getNumber() || val;
      input.value = fullNumber;
      console.log("Accepted Number:", fullNumber);
    });

    input.addEventListener("input", () => (errorMsg.textContent = ""));
  });
  </script>

</body>
</html>