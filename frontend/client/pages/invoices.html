<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>TSL Freight Movers INC.</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!--- Favicons --->
  <link href="../../assets/img/f-icon.png" rel="icon">
  <link href="../../assets/img/l-icon.png" rel="apple-touch-icon">

  <!--- Google Fonts --->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Amatic+SC:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!--- Vendor CSS Files --->
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!--- Main CSS File --->
  <link href="../../client/styles/invoices.css" rel="stylesheet">

  <!--- Icons --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">

  <!--- Chart --->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!--- Preloader --->
  <div id="preloader"></div>

  <!--- ================ Navbar ================ --->
  <nav>
    <div class="logo-name">
      <div class="logo-image">
        <img src="../../assets/img/logo.png" alt="TSL Logo">
      </div>
      <span class="logo_name">TSL FREIGHT<br>MOVERS, INC.</span>
    </div>

    <div class="menu-items">
      <ul class="nav-links">
        <li>
          <a href="./clientdashboard.html">
            <i class="uil uil-estate"></i>
            <span class="link-name">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="./bookings.html">
            <i class="uil uil-schedule"></i>
            <span class="link-name">Book</span>
          </a>
        </li>
        <li>
          <a href="./shipment.html">
            <i class="uil uil-ship"></i>
            <span class="link-name">Shipments</span>
          </a>
        </li>
        <li>
          <a href="./history.html">
            <i class="uil uil-history"></i>
            <span class="link-name">History</span>
          </a>
        </li>
        <li>
          <a href="./invoices.html" class="active">
            <i class="uil uil-receipt"></i>
            <span class="link-name">Invoices</span>
          </a>
        </li>
      </ul>

      <ul class="logout-mode">
        <li>
          <a href="../../login.html">
            <i class="uil uil-signout"></i>
            <span class="link-name">Logout</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!--- ================ Dashboard ================ --->
  <main class="dashboard">
    <div class="top d-flex align-items-center justify-content-between px-3 py-2">
      <i class="fas fa-bars hamburger-menu me-2" id="hamburgerMenu"></i>
      <div class="d-flex flex-column">
        <h4 class="dashboard-title mb-0">Invoices</h4>
        <p class="dashboard-date mb-0" id="current-date" data-field="currentDate">â€”</p>
      </div>

      <!-- Profile and Notifications -->
      <div class="profile-dropdown position-relative">
        <div class="profile-wrapper position-relative d-inline-block">
          <i class="fas fa-user-circle profile-icon" id="profileIcon"></i>
          <span id="notifCount" class="notif-badge">0</span>
        </div>
        <div class="dropdown-menu" id="profileDropdown">
          <a href="./profile.html"><i class="uil uil-user"></i> Profile</a>
          <a href="./notifications.html"><i class="uil uil-bell"></i> Notifications</a>
        </div>
      </div>
    </div>

    <!--- ================ Invoices Section ================ --->
    <section class="mx-3 mb-4">
      <div class="container-fluid mt-4">
        <div class="px-3 mt-3">
          <div class="d-flex flex-column mb-4">
            <h3 class="fw-semibold text-dark mb-1" style="font-size:1.3rem;">
              Welcome back, <span id="username">Client</span>!
            </h3>
            <p class="text-muted mb-0" style="font-size:0.95rem;">
              Here you can view, download, and manage all your invoices.
            </p>
          </div>
        </div>

        <div class="row g-3 mb-4 kpi-cards">
          <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card d-flex justify-content-between align-items-center p-3 shadow-sm">
              <div>
                <small class="text-muted">Total Invoices</small>
                <h3 id="total-invoices" class="mb-1 fw-bold">0</h3>
                <small class="text-primary">All Time</small>
              </div>
              <div><i class="fas fa-file-invoice stat-icon icon-invoice"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card d-flex justify-content-between align-items-center p-3 shadow-sm">
              <div>
                <small class="text-muted">Paid</small>
                <h3 id="paid-invoices" class="mb-1 fw-bold">0</h3>
                <small class="text-success">Settled</small>
              </div>
              <div><i class="fas fa-check-circle stat-icon icon-paid"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card d-flex justify-content-between align-items-center p-3 shadow-sm">
              <div>
                <small class="text-muted">Pending</small>
                <h3 id="pending-invoices" class="mb-1 fw-bold">0</h3>
                <small class="text-warning">Awaiting Payment</small>
              </div>
              <div><i class="fas fa-hourglass-half stat-icon icon-pending"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card d-flex justify-content-between align-items-center p-3 shadow-sm">
              <div>
                <small class="text-muted">Overdue</small>
                <h3 id="overdue-invoices" class="mb-1 fw-bold">0</h3>
                <small class="text-danger">Past Due</small>
              </div>
              <div><i class="fas fa-exclamation-circle stat-icon icon-overdue"></i></div>
            </div>
          </div>
        </div>

        <!--- Invoices Table --->
        <div class="card shadow-sm border-1 mt-4">
          <div class="card-header bg-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0 fw-bold">All Invoices</h5>
          </div>

          <div class="card-body">
            <span class="text-muted small d-block mb-3">
              View all your invoices. Easily search, filter, and track payments.
            </span>

            <!--- Search & Filter --->
            <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
              <div class="d-flex align-items-center gap-2">
                <div class="search-bar d-flex align-items-center" style="max-width:250px;">
                  <i class="fas fa-search me-2 text-muted"></i>
                  <input type="text" id="invoiceSearch" class="form-control form-control-sm"
                    placeholder="Search invoices...">
                </div>

                <button id="invoiceFilterBtn" class="btn btn-outline-secondary btn-sm">
                  <i class="fas fa-filter me-1"></i> Filter
                </button>
              </div>

              <div>
                <button id="exportBtn" class="btn btn-outline-secondary btn-sm">
                  <i class="fas fa-file-export me-1"></i> Export
                </button>
              </div>
            </div>

            <!--- Table --->
            <div class="table-responsive">
              <table class="table table-hover align-middle">
                <thead class="table-light">
                  <tr>
                    <th>Invoice ID</th>
                    <th>Booking Ref</th>
                    <th>Date Issued</th>
                    <th>Due Date</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th class="text-center">Actions</th>
                  </tr>
                </thead>
                <tbody id="invoiceTableBody">
                  <!--- Dynamic Invoice --->
                </tbody>
              </table>
            </div>

            <!--- Pagination Controls --->
            <div>
              <ul class="pagination justify-content-center mt-3" id="Pagination">
                <!-- Buttons Pagination -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!--- ================ Invoice Modal ================ --->
    <div class="modal fade" id="invoiceModal" tabindex="-1">
      <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="invoiceModalTitle">Invoice</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body" id="invoiceModalBody">
            <!--- Dynamic Invoice Modal --->
          </div>
          <div class="modal-footer">
            <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
            <button class="btn btn-primary" id="downloadInvoiceBtn">
              <i class="fas fa-download me-1"></i> Download PDF
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!--- Scripts --->
  <script src="../script/client_invoice.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    window.addEventListener("load", function () {
      const preloader = document.getElementById("preloader");
      if (preloader) {
        preloader.style.opacity = "0";
        preloader.style.visibility = "hidden";
        setTimeout(() => preloader.remove(), 600);
      }
    });
  </script>
</body>
</html>
