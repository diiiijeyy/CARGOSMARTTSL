<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <!--- Title --->
  <title>TSL Freight Movers INC.</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!--- Favicons --->
  <link href="../../assets/img/f-icon.png" rel="icon">
  <link href="../../assets/img/l-icon.png" rel="apple-touch-icon">

  <!--- Google Fonts --->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Amatic+SC:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!--- Vendor CSS Files --->
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!--- Main CSS File --->
  <link href="../../client/styles/history.css" rel="stylesheet">

  <!--- Icon Libraries --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
</head>

<body>
  <!--- Preloader --->
  <div id="preloader"></div>

  <!--- Navbar --->
  <nav>
    <div class="logo-name">
      <div class="logo-image">
        <img src="../../assets/img/logo.png" alt="TSL Logo">
      </div>
      <span class="logo_name">TSL FREIGHT<br>MOVERS, INC.</span>
    </div>

    <div class="menu-items">
      <ul class="nav-links">
        <li>
          <a href="./clientdashboard.html">
            <i class="uil uil-estate"></i>
            <span class="link-name">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="./bookings.html">
            <i class="uil uil-schedule"></i>
            <span class="link-name">Book</span>
          </a>
        </li>
        <li>
          <a href="./shipment.html">
            <i class="uil uil-ship"></i>
            <span class="link-name">Shipments</span>
          </a>
        </li>
        <li>
          <a href="./history.html" class="active">
            <i class="uil uil-history"></i>
            <span class="link-name">History</span>
          </a>
        </li>
        <li>
          <a href="./invoices.html">
            <i class="uil uil-receipt"></i>
            <span class="link-name">Invoices</span>
          </a>
        </li>
      </ul>

      <ul class="logout-mode">
        <li>
          <a href="../../login.html">
            <i class="uil uil-signout"></i>
            <span class="link-name">Logout</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <!--- End Navbar --->

  <!--- Dashboard --->
  <main class="dashboard">
    <section class="top d-flex align-items-center justify-content-between px-3 py-2">
      <i class="fas fa-bars hamburger-menu me-2" id="hamburgerMenu"></i>
      <div class="d-flex flex-column">
        <h4 class="dashboard-title mb-0">History</h4>
        <p class="dashboard-date mb-0" id="current-date">â€”</p>
      </div>

      <!--- Profile and Notifications --->
      <div class="profile-dropdown position-relative">
        <div class="profile-wrapper position-relative d-inline-block">
          <i class="fas fa-user-circle profile-icon" id="profileIcon"></i>
          <span id="notifCount" class="notif-badge">0</span>
        </div>
        <div class="dropdown-menu" id="profileDropdown">
          <a href="./profile.html"><i class="uil uil-user"></i> Profile</a>
          <a href="./notifications.html"><i class="uil uil-bell"></i> Notifications</a>
        </div>
      </div>
    </section>

    <section class="history-section container mt-4 pt-2">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="mb-0 fw-semibold">Shipment Records</h5>
            <span class="small text-muted" id="shipmentCount">0 total shipments</span>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2 position-relative">
            <div class="d-flex align-items-center gap-2">
              <div class="search-bar d-flex align-items-center" style="max-width:250px;">
                <i class="fas fa-search me-2 text-muted"></i>
                <input type="text" id="searchInput" class="form-control form-control-sm"
                  placeholder="Search shipments...">
              </div>

              <button id="invoiceFilterBtn" class="btn btn-outline-secondary btn-sm shadow-sm position-relative">
                <i class="fas fa-filter me-1"></i> Filter
              </button>

              <!--- Filter Popover --->
              <div id="filterPopover"
                class="card shadow-sm p-3 border-0 position-fixed"
                style="display:none; top:auto; left:auto; width:260px; z-index:1055; border-radius:10px;">
                <h6 class="fw-semibold mb-3">Filter Shipments</h6>

                <label class="small text-muted mb-1">Service</label>
                <select id="serviceFilter" class="form-select form-select-sm mb-3">
                  <option value="all">All Services</option>

                  <optgroup label="Sea Freight">
                    <option value="Sea Freight Forwarding">Sea Freight Forwarding</option>
                    <option value="Sea Freight Consolidation">Sea Freight Consolidation</option>
                    <option value="Customs Brokerage">Customs Brokerage</option>
                  </optgroup>

                  <optgroup label="Air Freight">
                    <option value="Air Freight Forwarding">Air Freight Forwarding</option>
                  </optgroup>

                  <optgroup label="Land Transport">
                    <option value="Trucking Services">Trucking Services</option>
                    <option value="Warehousing">Warehousing</option>
                    <option value="Door to Door Services">Door to Door Services</option>
                    <option value="Rigging">Rigging</option>
                  </optgroup>
                </select>

                <label class="small text-muted mb-1">Status</label>
                <select id="statusFilter" class="form-select form-select-sm mb-3">
                  <option value="all">All Status</option>
                  <option value="pending">Pending</option>
                  <option value="approved">Approved</option>
                  <option value="completed">Completed</option>
                  <option value="declined">Declined</option>
                </select>

                <div class="d-flex justify-content-end gap-2 mt-2">
                  <button id="applyFilterBtn" class="btn btn-primary btn-sm shadow-sm">Apply</button>
                  <button id="resetFilterBtn" class="btn btn-light btn-sm shadow-sm">Reset</button>
                </div>
              </div>
            </div>

            <div>
              <button class="btn btn-success btn-sm shadow-sm" id="exportBtn">
                <i class="fas fa-file-excel me-1"></i> Export Excel
              </button>
            </div>
          </div>

          <hr class="my-3" style="border-top: 1px solid #e5e7eb;">

          <!--- Shipment Records --->
          <div>
            <div class="table-responsive">
              <table class="table table-sm align-middle table-hover mb-0" id="shipmentTable">
                <thead class="table-light">
                  <tr>
                    <th>Shipment ID</th>
                    <th>Service</th>
                    <th>Status</th>
                    <th>Reason</th>
                    <th>Origin</th>
                    <th>Destination</th>
                    <th>Date</th>
                    <th>Tracking</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="shipmentTableBody">
                </tbody>
              </table>
            </div>

            <!--- Pagination --->
            <div class="pagination-wrapper d-flex justify-content-between align-items-center mt-3">
              <span class="small text-muted" id="paginationInfo">Showing 0 results</span>
              <div class="d-flex gap-2">
                <button class="btn btn-light btn-sm" id="prevBtn" disabled>
                  <i class="fas fa-chevron-left"></i> Previous
                </button>
                <button class="btn btn-light btn-sm" id="nextBtn">
                  Next <i class="fas fa-chevron-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!--- Shipment Details Modal --->
  <div class="modal fade shipment-modal" id="shipmentModal" tabindex="-1" aria-labelledby="shipmentModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-zoom">
      <div class="modal-content border-0 shadow-lg rounded-4">
        <div class="modal-header border-0 bg-primary text-white d-flex align-items-center">
          <div class="d-flex align-items-center gap-2">
            <i class="fas fa-box-open fs-4"></i>
            <h5 class="modal-title fw-semibold mb-0" id="shipmentModalLabel">Shipment Details</h5>
          </div>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body px-4 py-4">
          <div class="row g-3" id="shipmentDetailsBody">
          </div>
        </div>

        <div class="modal-footer border-0 bg-light rounded-bottom-4">
          <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">
            <i class="fas fa-times me-2"></i> Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!--- History JS --->
  <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../script/history.js"></script>
</body>

</html>
